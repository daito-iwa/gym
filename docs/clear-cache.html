<!DOCTYPE html>
<html>
<head>
    <title>キャッシュクリア - Gymnastics AI</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>キャッシュをクリア中...</h1>
    <p>HB技データのキャッシュをクリアしています。しばらくお待ちください。</p>
    
    <script>
    // Service Workerを削除
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister();
                console.log('Service Worker削除:', registration);
            }
        });
    }
    
    // LocalStorageをクリア
    localStorage.clear();
    console.log('LocalStorage削除完了');
    
    // SessionStorageをクリア
    sessionStorage.clear();
    console.log('SessionStorage削除完了');
    
    // IndexedDBをクリア
    if ('indexedDB' in window) {
        indexedDB.databases().then(databases => {
            databases.forEach(db => {
                indexedDB.deleteDatabase(db.name);
                console.log('IndexedDB削除:', db.name);
            });
        });
    }
    
    // キャッシュAPIをクリア
    if ('caches' in window) {
        caches.keys().then(names => {
            names.forEach(name => {
                caches.delete(name);
                console.log('Cache削除:', name);
            });
        });
    }
    
    setTimeout(() => {
        alert('キャッシュクリア完了！app.htmlにリダイレクトします。');
        window.location.href = 'app.html';
    }, 3000);
    </script>
</body>
</html>